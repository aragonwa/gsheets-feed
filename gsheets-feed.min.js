!function(e){"use strict";e.fn.GSFeed=function(a){function t(a){d.addClass("news-feed"),d.addClass("dated-news-feed");var t='<h2><span class="fa-stack"><i class="fa fa-square fa-stack-2x"></i><i class="fa '+n.titleIcon+' fa-stack-1x fa-inverse"></i> </span> '+n.title+"</h2>",s=[];e.each(a.feed.entry,function(e,a){if(e+1>n.numItems)return!1;var t={};t={date:a["gsx$"+n.cols.date].$t,title:a["gsx$"+n.cols.title].$t,link:a["gsx$"+n.cols.link].$t,text:a["gsx$"+n.cols.text].$t},s.push(t)}),s.sort(function(e,a){return new Date(e.date)<new Date(a.date)?1:new Date(e.date)>new Date(a.date)?-1:0}),e.each(s,function(e,a){var s=a.date,d=a.title,o=a.link,r=a.text,c=s.split("/"),f=i(c[0]),u=c[1];t+='<div class="media"><div class="media-left">',t+='<div class="date-day">'+u+"</div>",t+='<div class="date-month">'+f+"</div>",t+="</div>";var p="Summary: "+r;t+='<div class="media-body">',t+='<a href="'+o+'" id="popover'+e+'" rel="popover" data-animation="true" data-html="true" data-placement="right" data-trigger="hover" data-delay="0" data-content="'+p+'" title="'+d+'">'+d+"</a>",n.showSummary&&(t+="<p>"+r+"</p>"),t+="</div></div>",l.push("#popover"+e)}),d.html(t),e(l).each(function(){e(l).popover()})}function s(){d.addClass("news-feed"),d.addClass("dated-news-feed");var e='<h2><span class="fa fa-exclamation-triangle fa-color-danger"></i> </span> Oops...</h2>';e+='<div class="media-body">',e+="<p>Sorry, this list is temporarily unavailable.</p>",e+='<p>Please go <a href="http://www.kingcounty.gov/about/news.aspx">here</a> to see all King County news.</a>',e+="</div>",d.html(e)}function i(e){var a=[];a[1]="JAN",a[2]="FEB",a[3]="MAR",a[4]="APR",a[5]="MAY",a[6]="JUN",a[7]="JUL",a[8]="AUG",a[9]="SEP",a[10]="OCT",a[11]="NOV",a[12]="DEC";var t=a[e];return t}var n=e.extend({feedURL:"//spreadsheets.google.com/feeds/list/16EvF7h015u3vg0O9PyUWFIk30aYr7GIrFISUS7O75mk/1/public/values?alt=json-in-script",cols:{title:"headline",link:"link",text:"description",date:"date"},numItems:4,title:"News",titleIcon:"fa-file-text-o",showSummary:!0},a),d=this,l=[];return this.each(function(){d.append('<i class="fa fa-spinner fa-spin fa-4x"></i>');var a=n.feedURL;e.ajax({url:a,dataType:"jsonp",timeout:5e3}).success(function(e){t(e)}).error(function(){s()})})}}(jQuery);
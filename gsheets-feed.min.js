!function(a){"use strict";a.fn.GSFeed=function(e){function t(e){d.addClass("news-feed"),d.addClass("dated-news-feed");var t='<h2><span class="fa-stack"><i class="fa fa-square fa-stack-2x"></i><i class="fa '+i.titleIcon+' fa-stack-1x fa-inverse"></i> </span> '+i.title+"</h2>",s=[];a.each(e.feed.entry,function(a,e){if(a+1>i.numItems)return!1;var t={};t={date:e.gsx$date.$t,title:e.gsx$title.$t,link:e.gsx$link.$t,text:e.gsx$text.$t},s.push(t)}),s.sort(function(a,e){return new Date(a.date)<new Date(e.date)?1:new Date(a.date)>new Date(e.date)?-1:0}),a.each(s,function(a,e){var s=e.date,d=e.title,o=e.link,l=e.text,c=s.split("/"),f=n(c[0]),u=c[1];t+='<div class="media"><div class="media-left">',t+='<div class="date-day">'+u+"</div>",t+='<div class="date-month">'+f+"</div>",t+="</div>";var p="Summary: "+l;t+='<div class="media-body">',t+='<a href="'+o+'" id="popover'+a+'" rel="popover" data-animation="true" data-html="true" data-placement="right" data-trigger="hover" data-delay="0" data-content="'+p+'" title="'+d+'">'+d+"</a>",i.showSummary&&(t+="<p>"+l+"</p>"),t+="</div></div>",r.push("#popover"+a)}),d.html(t),a(r).each(function(){a(r).popover()})}function s(){d.addClass("news-feed"),d.addClass("dated-news-feed");var a='<h2><span class="fa fa-exclamation-triangle fa-color-danger"></i> </span> Oops...</h2>';a+='<div class="media-body">',a+="<p>Sorry, this list is temporarily unavailable.</p>",a+='<p>Please go <a href="http://www.kingcounty.gov/about/news.aspx">here</a> to see all King County news.</a>',a+="</div>",d.html(a)}function n(a){var e=[];e[1]="JAN",e[2]="FEB",e[3]="MAR",e[4]="APR",e[5]="MAY",e[6]="JUN",e[7]="JUL",e[8]="AUG",e[9]="SEP",e[10]="OCT",e[11]="NOV",e[12]="DEC";var t=e[a];return t}var i=a.extend({feedURL:"",numItems:4,title:"News",titleIcon:"fa-file-text-o",showSummary:!0},e),d=this,r=[];return this.each(function(){d.append('<i class="fa fa-spinner fa-spin fa-4x"></i>');var e=i.feedURL;a.ajax({url:e,dataType:"jsonp",timeout:5e3}).success(function(a){t(a)}).error(function(){s()})})}}(jQuery);
